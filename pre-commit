#!/bin/bash

function shellCheck()
 {
         fileType=$1
         file=$2
         if [ "$fileType" == ".sh" ] ; then
                  op=$(shellcheck $file)
                  res=$?
                  if [ "$res" -ne "0" ] ; then
                           echo "$file: failed check"
                           echo "$op"
                           isAllFine=1
                   fi;
           fi;
	return $isAllFine
 }

for i in `git diff --cached --name-only --diff-filter=ACM`; do
	isAllFine=0
	input=${i:(-3)}
	shellCheck $input $i

done

if [ "$isAllFine" -eq "1" ] ; then
	 exit 1
 else
	 exit 0
 fi;
